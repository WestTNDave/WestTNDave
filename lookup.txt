var retStr = "";
var xmlStrLC = xmlStr.toLowerCase();
if (q.length > u.length+1)
{
  u = q;
}
var uLC = u.toLowerCase();
var xmlTwitchUserCharPos = xmlStrLC.indexOf("<twitch>" + uLC + "</twitch>");
var xmlGlobalUserCharPos = xmlStrLC.indexOf("<global>" + uLC + "</global>");
if(-1 == xmlTwitchUserCharPos && -1 == xmlGlobalUserCharPos)
{
  retStr = "No information on user: " + u + " was found.";
}
else
{
  var xmlUserCharPos = 0;
  if(xmlTwitchUserCharPos > 0)
  {
    retStr = "Twitch User: " + xmlStr.substr(xmlTwitchUserCharPos+8, u.length);
    var xmlOpenGlobalCharPos = xmlStr.indexOf("<global>", xmlTwitchUserCharPos);
    var xmlCloseGlobalCharPos = xmlStr.indexOf("</global>", xmlTwitchUserCharPos);
    retStr += " is " + xmlStr.substr(xmlOpenGlobalCharPos + 8, xmlCloseGlobalCharPos - xmlOpenGlobalCharPos - 8) + " on Global Poker. ";
    xmlUserCharPos = xmlTwitchUserCharPos;
  }
  else
  {
    retStr = "Global Poker User: " + xmlStr.substr(xmlGlobalUserCharPos, u.length);
    var startPosforTwitch = xmlGlobalUserCharPos-50;
    if (startPosforTwitch < 0)
    {
      startPosforTwitch = 0;
    }
    var xmlOpenTwitchCharPos = xmlStr.indexOf("<twitch>", startPosforTwitch);
    var xmlCloseTwitchCharPos = xmlStr.indexOf("</twitch>", startPosforTwitch);
    retStr += " is " + xmlStr.substr(xmlOpenTwitchCharPos + 8, xmlCloseTwitchCharPos - xmlOpenTwitchCharPos - 8) + " on Twitch. ";
    xmlUserCharPos = xmlCloseGlobalCharPos;
  }
  var xmlOpenNoteCharPos = xmlStr.indexOf("<note>", xmlUserCharPos);
  var xmlCloseNoteCharPos = xmlStr.indexOf("</note>", xmlUserCharPos);
  retStr += xmlStr.substr(xmlOpenNoteCharPos + 6, xmlCloseNoteCharPos - xmlOpenNoteCharPos - 6);
}
retStr;
